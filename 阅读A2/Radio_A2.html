<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TCF A2 - é˜…è¯»éšèº«å¬</title>
    <style>
        :root {
            --theme-color: #2ecc71;  /* æ’­æ”¾é”®é»˜è®¤ï¼šæ¸…æ–°ç»¿ */
            --theme-dark: #27ae60;   /* æ’­æ”¾é”®æ‚¬åœï¼šæ·±ç»¿ */
            --side-color: #95a5a6;   /* ä¾§è¾¹é”®é»˜è®¤ï¼šé«˜çº§ç° */
            --side-hover: #3498db;   /* ä¾§è¾¹é”®æ‚¬åœï¼šæ¹–è“è‰² */
            --glass: rgba(255, 255, 255, 0.7);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%);
            display: flex;
            justify-content: center;
            align-items: flex-start; 
            margin: 0;
            overflow: hidden;
			/* ğŸ¯ é‡ç‚¹ 3ï¼šä½¿ç”¨ svh (Small Viewport Height)ï¼Œå®Œç¾é¿å¼€æ‰‹æœºåœ°å€æ /æ§åˆ¶æ  */
			height: 100svh;
            padding-top: 15px;
			/* ğŸ¯ é‡ç‚¹ 4ï¼šç»™åº•éƒ¨ä¹Ÿç•™å‡ºå¼ºåˆ¶çš„ 15px å‘¼å¸ç©ºé—´ */
			padding-bottom: 15px; 
            -webkit-tap-highlight-color: transparent;
        }

        .player-card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            width: 96%;
            max-width: 380px;
			/* ğŸ¯ é‡ç‚¹ 1ï¼šä½¿ç”¨ calc() åŠ¨æ€è®¡ç®—é«˜åº¦ï¼Œå‡å»é¡¶éƒ¨çš„ paddingï¼Œé˜²æ­¢æ’‘çˆ† */
			height: calc(100% - 20px);
			/* ğŸ¯ é‡ç‚¹ 2ï¼šé…åˆ max-height é™åˆ¶ï¼Œé˜²æ­¢åœ¨å¹³æ¿ä¸Šæ‹‰å¾—å¤ªé•¿ */
			max-height: 850px;
            padding: 20px;
            border-radius: 28px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.4);
            display: flex;
            flex-direction: column;
            align-items: center; 
            box-sizing: border-box; 
        }
		.cover-art {
					width: 140px;
					height: 140px;
					
					/* ğŸ¯ é‡ç‚¹ä¿®æ”¹ 1ï¼šæµ…ç»¿åˆ°æµ…è“çš„æ¸å˜è‰² */
					background: linear-gradient(45deg, #84fab0 0%, #8fd3f4 100%); 
					
					margin: 5px auto 15px;
					border-radius: 20px;
					display: flex;
					justify-content: center;
					align-items: center;
					font-size: 50px; 
					
					/* ğŸ¯ é‡ç‚¹ä¿®æ”¹ 2ï¼šæŠŠé˜´å½±ä¹Ÿæ”¹æˆåŒ¹é…çš„æ·¡æ·¡é’è‰²ï¼Œå»æ‰åŸæ¥çš„ç²‰è‰²é˜´å½± */
					box-shadow: 0 10px 20px rgba(132, 250, 176, 0.3); 
					
					transition: transform 0.3s ease;
					flex-shrink: 0;
		}
        .playing .cover-art { transform: scale(1.05); }

        h2 { margin: 0; font-size: 1.1rem; color: #1d1d1f; text-align: center; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        #status { font-size: 0.8rem; color: #86868b; margin-top: 4px; text-align: center; width: 100%; }

        .progress-box {
            width: 100%; height: 5px; background: rgba(0,0,0,0.05); border-radius: 10px; margin: 25px 0 15px; cursor: pointer; position: relative;
        }
        .progress-bar {
            height: 100%; background: var(--theme-color); width: 0%; border-radius: 10px; transition: width 0.1s linear;
        }

        .controls { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 30px; /* æ‹‰è¿‘ä¸€ç‚¹ï¼Œæ˜¾å¾—æ›´ç´§å‡‘é«˜çº§ */
            margin: 10px 0 20px; 
            width: 100%;
        }

        /* å½»åº•æ¸…é™¤ Windows/Chrome çš„è“è‰²ç‚¹å‡»ç„¦ç‚¹æ¡† */
        button {
            background: none !important;
            border: none !important;
            outline: none !important; 
            box-shadow: none !important;
            padding: 0;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        button:focus, button:active, button:focus-visible {
            outline: none !important;
        }

        /* ğŸ¯ ä¾§è¾¹æŒ‰é’®ï¼šé»˜è®¤ç°ï¼Œæ‚¬åœæ¹–è“ + é˜´å½± */
        .btn-side {
            color: var(--side-color); 
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-side:hover {
            color: var(--side-hover); 
            transform: scale(1.15); 
            filter: drop-shadow(0 4px 8px rgba(52, 152, 219, 0.5));
        }
        .btn-side:active { 
            transform: scale(0.95); 
            filter: drop-shadow(0 2px 4px rgba(52, 152, 219, 0.3));
        }

        /* ğŸ¯ æ’­æ”¾æŒ‰é’®ï¼šé»˜è®¤ç»¿ï¼Œæ‚¬åœæ·±ç»¿ + é˜´å½± */
        .play-btn {
            color: var(--theme-color);
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .play-btn:hover {
            color: var(--theme-dark);
            transform: scale(1.15);
            filter: drop-shadow(0 4px 8px rgba(46, 204, 113, 0.5));
        }
        .play-btn:active { 
            transform: scale(0.95); 
            filter: drop-shadow(0 2px 4px rgba(46, 204, 113, 0.3));
        }

        #playlist {
            flex: 1; 
            width: 100%; 
            overflow-y: auto;
            text-align: left;
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-top: 10px;
            -webkit-overflow-scrolling: touch;
        }
        
        /* ä¼˜åŒ– Windows æ»šåŠ¨æ¡ */
        #playlist::-webkit-scrollbar { width: 5px; }
        #playlist::-webkit-scrollbar-track { background: transparent; }
        #playlist::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.15); border-radius: 10px; }
        #playlist::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.3); }

        .track-item {
            padding: 12px 15px;
            margin-bottom: 2px;
            border-radius: 10px;
            font-size: 13px;
            color: #424245;
            cursor: pointer;
            transition: background 0.2s;
        }
        .track-item:hover { background: rgba(0,0,0,0.03); }
        .track-item.active {
            background: rgba(46, 204, 113, 0.1);
            color: var(--theme-color);
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="player-card" id="card">
    <div class="cover-art">ğŸ—¼</div>
    <h2 id="title">TCF A2 - PrÃ©paration</h2>
    <div id="status">PrÃªt pour l'examen...</div>

    <div class="progress-box" id="progressBox">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="controls">
        <button class="btn-side" onclick="changeTrack(-1)">
            <svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07a1 1 0 0 0 0 1.64z"/>
            </svg>
        </button>
        <button class="play-btn" id="playBtn" onclick="togglePlay()">
            <svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/>
            </svg>
        </button>
        <button class="btn-side" onclick="changeTrack(1)">
            <svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.64L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"/>
            </svg>
        </button>
    </div>

    <div id="playlist"></div>
</div>

<audio id="audioPlayer"></audio>

<script>
    const basePath = "./TCF_Reading_Recording/";
    // ä½ çš„ 113 ä¸ª A2 éŸ³é¢‘åˆ—è¡¨
    const tracks = ["Reading_T1_Q5.mp3", "Reading_T1_Q6.mp3", "Reading_T1_Q7.mp3", "Reading_T1_Q8.mp3", "Reading_T1_Q9.mp3", "Reading_T1_Q10.mp3", "Reading_T10_Q5.mp3", "Reading_T10_Q7.mp3", "Reading_T10_Q8.mp3", "Reading_T10_Q9.mp3", "Reading_T11_Q6.mp3", "Reading_T11_Q7.mp3", "Reading_T11_Q8.mp3", "Reading_T11_Q9.mp3", "Reading_T11_Q10.mp3", "Reading_T12_Q7.mp3", "Reading_T12_Q8.mp3", "Reading_T12_Q9.mp3", "Reading_T13_Q5.mp3", "Reading_T13_Q8.mp3", "Reading_T13_Q10.mp3", "Reading_T14_Q9.mp3", "Reading_T15_Q5.mp3", "Reading_T15_Q8.mp3", "Reading_T16_Q6.mp3", "Reading_T16_Q7.mp3", "Reading_T16_Q8.mp3", "Reading_T17_Q5.mp3", "Reading_T17_Q6.mp3", "Reading_T17_Q7.mp3", "Reading_T17_Q8.mp3", "Reading_T17_Q9.mp3", "Reading_T17_Q10.mp3", "Reading_T18_Q5.mp3", "Reading_T18_Q6.mp3", "Reading_T18_Q8.mp3", "Reading_T18_Q9.mp3", "Reading_T19_Q6.mp3", "Reading_T19_Q7.mp3", "Reading_T19_Q8.mp3", "Reading_T20_Q7.mp3", "Reading_T20_Q9.mp3", "Reading_T2_Q5.mp3", "Reading_T2_Q6.mp3", "Reading_T2_Q7.mp3", "Reading_T2_Q8.mp3", "Reading_T2_Q9.mp3", "Reading_T2_Q10.mp3", "Reading_T21_Q9.mp3", "Reading_T22_Q5.mp3", "Reading_T22_Q10.mp3", "Reading_T23_Q5.mp3", "Reading_T23_Q6.mp3", "Reading_T23_Q7.mp3", "Reading_T23_Q8.mp3", "Reading_T23_Q10.mp3", "Reading_T24_Q5.mp3", "Reading_T24_Q7.mp3", "Reading_T24_Q8.mp3", "Reading_T25_Q5.mp3", "Reading_T25_Q6.mp3", "Reading_T25_Q7.mp3", "Reading_T29_Q5.mp3", "Reading_T29_Q6.mp3", "Reading_T29_Q7.mp3", "Reading_T29_Q8.mp3", "Reading_T29_Q9.mp3", "Reading_T29_Q10.mp3", "Reading_T27_Q1.mp3", "Reading_T27_Q5.mp3", "Reading_T27_Q6.mp3", "Reading_T27_Q8.mp3", "Reading_T27_Q9.mp3", "Reading_T27_Q10.mp3", "Reading_T28_Q5.mp3", "Reading_T28_Q7.mp3", "Reading_T35_Q8.mp3", "Reading_T35_Q10.mp3", "Reading_T36_Q8.mp3", "Reading_T36_Q10.mp3", "Reading_T37_Q5.mp3", "Reading_T37_Q6.mp3", "Reading_T37_Q7.mp3", "Reading_T37_Q8.mp3", "Reading_T38_Q5.mp3", "Reading_T38_Q7.mp3", "Reading_T38_Q8.mp3", "Reading_T39_Q5.mp3", "Reading_T40_Q7.mp3", "Reading_T40_Q8.mp3", "Reading_T4_Q5.mp3", "Reading_T4_Q6.mp3", "Reading_T4_Q7.mp3", "Reading_T4_Q8.mp3", "Reading_T4_Q9.mp3", "Reading_T4_Q10.mp3", "Reading_T40_Q5.mp3", "Reading_T40_Q6.mp3", "Reading_T41_Q5.mp3", "Reading_T41_Q7.mp3", "Reading_T41_Q8.mp3", "Reading_T42_Q5.mp3", "Reading_T42_Q6.mp3", "Reading_T42_Q7.mp3", "Reading_T42_Q8.mp3", "Reading_T43_Q5.mp3", "Reading_T43_Q6.mp3", "Reading_T8_Q5.mp3", "Reading_T8_Q6.mp3", "Reading_T8_Q7.mp3", "Reading_T8_Q8.mp3", "Reading_T9_Q6.mp3", "Reading_T9_Q8.mp3"];
    const playIcon = '<svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/></svg>';
    const pauseIcon = '<svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor"><path d="M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"/></svg>';

    let cur = 0;
    const audio = document.getElementById('audioPlayer');
    const playBtn = document.getElementById('playBtn');
    const progressBox = document.getElementById('progressBox'); // ç»‘å®šè¿›åº¦æ¡åŒºåŸŸ

    function init() {
        const list = document.getElementById('playlist');
        tracks.forEach((t, i) => {
            const item = document.createElement('div');
            item.className = 'track-item'; item.id = 'track-' + i;
            item.innerText = (i + 1) + ". " + t;
            item.onclick = () => load(i);
            list.appendChild(item);
        });
        updateMediaSession(); // åˆå§‹åŒ–é”å±æ§åˆ¶
    }

    function load(i) {
        cur = i;
        audio.src = basePath + tracks[cur];
        document.getElementById('title').innerText = tracks[cur];
        document.getElementById('status').innerText = "Lecture en cours...";
        document.querySelectorAll('.track-item').forEach(el => el.classList.remove('active'));
        const activeItem = document.getElementById('track-' + i);
        activeItem.classList.add('active');
        activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        document.getElementById('card').classList.add('playing');
        audio.play();
        playBtn.innerHTML = pauseIcon; 
        updateMediaSession(); // æ¯æ¬¡åˆ‡æ­Œæ›´æ–°é”å±ä¿¡æ¯
    }

    function togglePlay() {
        if (!audio.src) { load(0); return; }
        if (audio.paused) { 
            audio.play(); 
            playBtn.innerHTML = pauseIcon; 
            document.getElementById('card').classList.add('playing'); 
        } else { 
            audio.pause(); 
            playBtn.innerHTML = playIcon; 
            document.getElementById('card').classList.remove('playing'); 
        }
    }

    function changeTrack(step) {
        load((cur + step + tracks.length) % tracks.length);
    }

    // ğŸ¯ æ ¸å¿ƒæ›´æ–°ï¼šæ³¨å†Œç³»ç»Ÿçº§é”å±æ§åˆ¶ä¸­å¿ƒ
    function updateMediaSession() {
        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({
                title: tracks[cur],
                artist: 'TCF A2 EntraÃ®nement',
                album: 'PrÃ©paration',
                // é”å±ä¸Šçš„å°å›¾æ ‡
                artwork: [{ src: 'https://img.icons8.com/color/480/france-circular.png', sizes: '480x480', type: 'image/png' }]
            });
            // ç»‘å®šé”å±æŒ‰é”®å¯¹åº”çš„å‡½æ•°
            navigator.mediaSession.setActionHandler('play', togglePlay);
            navigator.mediaSession.setActionHandler('pause', togglePlay);
            navigator.mediaSession.setActionHandler('previoustrack', () => changeTrack(-1));
            navigator.mediaSession.setActionHandler('nexttrack', () => changeTrack(1));
        }
    }

    audio.onended = () => changeTrack(1);
    
    // æ›´æ–°è¿›åº¦æ¡ UI
    audio.ontimeupdate = () => {
        if (audio.duration) {
            document.getElementById('progressBar').style.width = (audio.currentTime / audio.duration * 100) + '%';
        }
    };

    // ğŸ¯ æ ¸å¿ƒæ›´æ–°ï¼šè¿›åº¦æ¡ç‚¹å‡»è·³è½¬é€»è¾‘
    progressBox.addEventListener('click', function(e) {
        if (!audio.src || !audio.duration) return; // æ²¡æ’­æ”¾æ—¶ç¦æ­¢ç‚¹å‡»æŠ¥é”™
        const width = this.clientWidth; // è·å–è¿›åº¦æ¡æ€»å®½åº¦
        const clickX = e.offsetX;       // è·å–é¼ æ ‡ç‚¹åœ¨è¿›åº¦æ¡ä¸Šçš„ X åæ ‡
        const duration = audio.duration; // éŸ³é¢‘æ€»æ—¶é•¿
        audio.currentTime = (clickX / width) * duration; // è·³è½¬
    });

    init();
</script>
</body>
</html>